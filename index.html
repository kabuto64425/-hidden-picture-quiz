<!doctype html>
<html class="no-js" lang=”ja”>

<head>
  <meta http-equiv="Content-Language" content="ja">
  <meta name="google" content="notranslate">
  <meta charset="utf-8">
  <title>隠し絵クイズ</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="og:title" content="">
  <meta property="og:type" content="">
  <meta property="og:url" content="">
  <meta property="og:image" content="">

  <meta name="theme-color" content="#fafafa">
  <style>
  </style>
</head>
<body style="margin: 0;">
    <div style="height: 710px; display : flex; flex-direction: column; justify-content: center; align-items: center;>
        <div style="position: relative; height: 603px; width: 803px;">
            <div style="position: absolute; height: 600px; width: 800px; padding: 1px 2px 2px 1px;">
                <img id="questionImage" src="" alt="" width="100%" height="100%"></img>
            </div>
            <div style="position: absolute;">
                <div style="display: flex">
                    <div style="height: 117px; width: 157px; margin: 3px 0px 0px 3px; outline-style: solid;outline-width: 3px;"><div id="panel1" style="height: 100%; width:100%; background-color: #ff7f7f"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 0px 0px 3px; outline-style: solid;outline-width: 3px;"><div id="panel2" style="height: 100%; width:100%; background-color: #ff7f7f"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 0px 0px 3px; outline-style: solid;outline-width: 3px;"><div id="panel3" style="height: 100%; width:100%; background-color: #ff7f7f"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 0px 0px 3px; outline-style: solid;outline-width: 3px;"><div id="panel4" style="height: 100%; width:100%; background-color: #ff7f7f"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 3px 0px 3px; outline-style: solid;outline-width: 3px;"><div id="panel5" style="height: 100%; width:100%; background-color: #ff7f7f"></div></div>
                </div>
                <div style="display: flex">
                    <div style="height: 117px; width: 157px; margin: 3px 0px 0px 3px; outline-style: solid;outline-width: 3px;"><div id="panel6" style="height: 100%; width:100%; background-color: #7fff7f"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 0px 0px 3px; outline-style: solid;outline-width: 3px;"><div id="panel7" style="height: 100%; width:100%; background-color: #7fff7f"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 0px 0px 3px; outline-style: solid;outline-width: 3px;"><div id="panel8" style="height: 100%; width:100%; background-color: #7fff7f"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 0px 0px 3px; outline-style: solid;outline-width: 3px;"><div id="panel9" style="height: 100%; width:100%; background-color: #7fff7f"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 3px 0px 3px; outline-style: solid;outline-width: 3px;"><div id="panel10" style="height: 100%; width:100%; background-color: #7fff7f"></div></div>
                </div>
                <div style="display: flex">
                    <div style="height: 117px; width: 157px; margin: 3px 0px 0px 3px; outline-style: solid;outline-width: 3px;"><div id="panel11" style="height: 100%; width:100%; background-color: #dfdfdf"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 0px 0px 3px; outline-style: solid;outline-width: 3px;"><div id="panel12" style="height: 100%; width:100%; background-color: #dfdfdf"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 0px 0px 3px; outline-style: solid;outline-width: 3px;"><div id="panel13" style="height: 100%; width:100%; background-color: #dfdfdf"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 0px 0px 3px; outline-style: solid;outline-width: 3px;"><div id="panel14" style="height: 100%; width:100%; background-color: #dfdfdf"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 3px 0px 3px; outline-style: solid;outline-width: 3px;"><div id="panel15" style="height: 100%; width:100%; background-color: #dfdfdf"></div></div>
                </div>
                <div style="display: flex">
                    <div style="height: 117px; width: 157px; margin: 3px 0px 0px 3px; outline-style: solid;outline-width: 3px;"><div id="panel16" style="height: 100%; width:100%; background-color: #7f7fff"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 0px 0px 3px; outline-style: solid;outline-width: 3px;"><div id="panel17" style="height: 100%; width:100%; background-color: #7f7fff"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 0px 0px 3px; outline-style: solid;outline-width: 3px;"><div id="panel18" style="height: 100%; width:100%; background-color: #7f7fff"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 0px 0px 3px; outline-style: solid;outline-width: 3px;"><div id="panel19" style="height: 100%; width:100%; background-color: #7f7fff"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 3px 0px 3px; outline-style: solid;outline-width: 3px;"><div id="panel20" style="height: 100%; width:100%; background-color: #7f7fff"></div></div>
                </div>
                <div style="display: flex">
                    <div style="height: 117px; width: 157px; margin: 3px 0px 3px 3px; outline-style: solid;outline-width: 3px;"><div id="panel21" style="height: 100%; width:100%; background-color: #ffbf7f"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 0px 3px 3px; outline-style: solid;outline-width: 3px;"><div id="panel22" style="height: 100%; width:100%; background-color: #ffbf7f"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 0px 3px 3px; outline-style: solid;outline-width: 3px;"><div id="panel23" style="height: 100%; width:100%; background-color: #ffbf7f"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 0px 3px 3px; outline-style: solid;outline-width: 3px;"><div id="panel24" style="height: 100%; width:100%; background-color: #ffbf7f"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 3px 3px 3px; outline-style: solid;outline-width: 3px;"><div id="panel25" style="height: 100%; width:100%; background-color: #ffbf7f"></div></div>
                </div>
            </div>
            <div id="cover" style="position: absolute;">
                <div style="display: flex">
                    <div style="height: 117px; width: 157px; margin: 3px 0px 0px 3px; outline-style: solid;outline-width: 3px;"><div style="height: 100%; width:100%; background-color: #7f7f7f"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 0px 0px 3px; outline-style: solid;outline-width: 3px;"><div style="height: 100%; width:100%; background-color: #7f7f7f"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 0px 0px 3px; outline-style: solid;outline-width: 3px;"><div style="height: 100%; width:100%; background-color: #7f7f7f"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 0px 0px 3px; outline-style: solid;outline-width: 3px;"><div style="height: 100%; width:100%; background-color: #7f7f7f"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 3px 0px 3px; outline-style: solid;outline-width: 3px;"><div style="height: 100%; width:100%; background-color: #7f7f7f"></div></div>
                </div>
                <div style="display: flex">
                    <div style="height: 117px; width: 157px; margin: 3px 0px 0px 3px; outline-style: solid;outline-width: 3px;"><div style="height: 100%; width:100%; background-color: #7f7f7f"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 0px 0px 3px; outline-style: solid;outline-width: 3px;"><div style="height: 100%; width:100%; background-color: #7f7f7f"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 0px 0px 3px; outline-style: solid;outline-width: 3px;"><div style="height: 100%; width:100%; background-color: #7f7f7f"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 0px 0px 3px; outline-style: solid;outline-width: 3px;"><div style="height: 100%; width:100%; background-color: #7f7f7f"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 3px 0px 3px; outline-style: solid;outline-width: 3px;"><div style="height: 100%; width:100%; background-color: #7f7f7f"></div></div>
                </div>
                <div style="display: flex">
                    <div style="height: 117px; width: 157px; margin: 3px 0px 0px 3px; outline-style: solid;outline-width: 3px;"><div style="height: 100%; width:100%; background-color: #7f7f7f"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 0px 0px 3px; outline-style: solid;outline-width: 3px;"><div style="height: 100%; width:100%; background-color: #7f7f7f"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 0px 0px 3px; outline-style: solid;outline-width: 3px;"><div style="height: 100%; width:100%; background-color: #7f7f7f"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 0px 0px 3px; outline-style: solid;outline-width: 3px;"><div style="height: 100%; width:100%; background-color: #7f7f7f"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 3px 0px 3px; outline-style: solid;outline-width: 3px;"><div style="height: 100%; width:100%; background-color: #7f7f7f"></div></div>
                </div>
                <div style="display: flex">
                    <div style="height: 117px; width: 157px; margin: 3px 0px 0px 3px; outline-style: solid;outline-width: 3px;"><div style="height: 100%; width:100%; background-color: #7f7f7f"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 0px 0px 3px; outline-style: solid;outline-width: 3px;"><div style="height: 100%; width:100%; background-color: #7f7f7f"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 0px 0px 3px; outline-style: solid;outline-width: 3px;"><div style="height: 100%; width:100%; background-color: #7f7f7f"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 0px 0px 3px; outline-style: solid;outline-width: 3px;"><div style="height: 100%; width:100%; background-color: #7f7f7f"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 3px 0px 3px; outline-style: solid;outline-width: 3px;"><div style="height: 100%; width:100%; background-color: #7f7f7f"></div></div>
                </div>
                <div style="display: flex">
                    <div style="height: 117px; width: 157px; margin: 3px 0px 3px 3px; outline-style: solid;outline-width: 3px;"><div style="height: 100%; width:100%; background-color: #7f7f7f"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 0px 3px 3px; outline-style: solid;outline-width: 3px;"><div style="height: 100%; width:100%; background-color: #7f7f7f"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 0px 3px 3px; outline-style: solid;outline-width: 3px;"><div style="height: 100%; width:100%; background-color: #7f7f7f"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 0px 3px 3px; outline-style: solid;outline-width: 3px;"><div style="height: 100%; width:100%; background-color: #7f7f7f"></div></div>
                    <div style="height: 117px; width: 157px; margin: 3px 3px 3px 3px; outline-style: solid;outline-width: 3px;"><div style="height: 100%; width:100%; background-color: #7f7f7f"></div></div>
                </div>
            </div>
        </div>
    </div>
    <input id="imageFileUploader" type="file" accept=".jpg, .png, .gif"/><button id="completeButton">完了</button>
  <script>
    //framerate = 60fps
    array = [...Array(25)].map((_, i) => i); //=> [ 0, 1, 2, 3, 4 ]
    let imageFileUploader;
    let completeButton;
    let questionImage;
    let cover;
    let isPause = true;

    let frameCount = 0;

    const shuffle = function(array) {
      for (let i = array.length - 1; i > 0; i--) {
        let j = Math.floor(Math.random() * (i + 1)); // 0 から i のランダムなインデックス
        [array[i], array[j]] = [array[j], array[i]]; // 要素を入れ替えます
      }
    }
    
    const addCompleteButtonEvent = function() {
        completeButton.addEventListener("click", function(e) {
            imageFile = imageFileUploader.files[0];
            
            // ファイルのブラウザ上でのURLを取得する
            let blobUrl = window.URL.createObjectURL(imageFile);
            questionImage.src = blobUrl;
            imageFileUploader.value = "";
        });
    }

    const addKeyOperation = function() {
        document.addEventListener("keydown", function(e){
            if(e.keyCode == 32) {
                e.preventDefault();
                isPause = true;
            } else if(e.keyCode == 13) {
                e.preventDefault();
                if(isPause) {
                    isPause = false;
                    // BGM再開用(BGMが不使用のため今は使わない)
                    /*if(frameCount / 60 <= 33.9) {
                        console.log(frameCount / 60)
                    }*/
                    requestAnimationFrame(main);
                }
            }
        });
    }

    const main = function() {
        const begin = Date.now();
        if(isPause) {
            cover.style.visibility = "visible";
            return;
        } else {
            cover.style.visibility = "hidden";
        }
        frameCount++;
        
        if(frameCount % 60 == 0) {
            i = (frameCount / 60) - 1;
            if(i < 25) {
                document.getElementById("panel" + (array[i] + 1)).style.setProperty("visibility", "hidden");
            }
        }
        
        // 次のrequestAnimationFrameが呼び出されるまでの実行時間を計測。デバッグ用。
        //console.log(Date.now() - begin);
        requestAnimationFrame(main);
    }

    window.addEventListener("load", (event) => {
        shuffle(array);
        imageFileUploader = document.getElementById("imageFileUploader");
        completeButton = document.getElementById("completeButton");
        questionImage = document.getElementById("questionImage");
        cover = document.getElementById("cover");
        addCompleteButtonEvent();
        addKeyOperation();
    });
  </script>

  <!-- Google Analytics: change UA-XXXXX-Y to be your site"s ID. -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga("create", "UA-XXXXX-Y", "auto"); ga("set", "anonymizeIp", true); ga("set", "transport", "beacon"); ga("send", "pageview")
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async></script>
</body>

</html>
